(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{397:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"ajax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax"}},[t._v("#")]),t._v(" "),a("code",[t._v("Ajax")])]),t._v(" "),a("p",[a("code",[t._v("Ajax")]),t._v("（"),a("code",[t._v("Asynchronous JavaScript and XML")]),t._v("）是一种用于创建交互式"),a("code",[t._v("Web")]),t._v("应用程序的技术。它允许"),a("code",[t._v("Web")]),t._v("应用程序通过异步方式与"),a("code",[t._v("Web")]),t._v("服务器通信，无需刷新整个页面即可更新部分内容，从而提高了用户体验和"),a("code",[t._v("Web")]),t._v("应用程序的性能。")]),t._v(" "),a("p",[a("code",[t._v("Ajax")]),t._v("通过"),a("code",[t._v("JavaScript")]),t._v("、"),a("code",[t._v("XMLHttpRequest")]),t._v("和"),a("code",[t._v("DOM")]),t._v("技术实现。"),a("code",[t._v("JavaScript")]),t._v("负责收集用户输入和动态修改页面，"),a("code",[t._v("XMLHttpRequest")]),t._v("对象用于与"),a("code",[t._v("Web")]),t._v("服务器进行异步通信，"),a("code",[t._v("DOM")]),t._v("则用于将服务器响应更新到"),a("code",[t._v("Web")]),t._v("页面上。")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("Ajax")]),t._v("，"),a("code",[t._v("Web")]),t._v("应用程序可以通过以下步骤与"),a("code",[t._v("Web")]),t._v("服务器进行异步通信：")]),t._v(" "),a("ol",[a("li",[t._v("创建"),a("code",[t._v("XMLHttpRequest")]),t._v("对象")]),t._v(" "),a("li",[t._v("使用"),a("code",[t._v("XMLHttpRequest")]),t._v("对象向"),a("code",[t._v("Web")]),t._v("服务器发送请求")]),t._v(" "),a("li",[t._v("接收"),a("code",[t._v("Web")]),t._v("服务器的响应")]),t._v(" "),a("li",[t._v("使用"),a("code",[t._v("DOM")]),t._v("将响应更新到"),a("code",[t._v("Web")]),t._v("页面上")])]),t._v(" "),a("h3",{attrs:{id:"代码示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码示例"}},[t._v("#")]),t._v(" 代码示例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" xhr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("使用该函数，可以轻松地发送"),a("code",[t._v("Ajax")]),t._v("请求并处理响应。例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"John"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("email")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"john@example.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User created:"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failed to create user:"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("该函数返回一个"),a("code",[t._v("Promise")]),t._v("对象，该对象在请求成功时会调用"),a("code",[t._v("resolve")]),t._v("方法，并将服务器响应的字符串作为参数传递。在请求失败时，该对象会调用"),a("code",[t._v("reject")]),t._v("方法，并将错误消息字符串作为参数传递。在请求成功或失败后，可以使用"),a("code",[t._v("then")]),t._v("方法或"),a("code",[t._v("catch")]),t._v("方法分别处理响应或错误。")]),t._v(" "),a("h3",{attrs:{id:"readystate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#readystate"}},[t._v("#")]),t._v(" "),a("code",[t._v("readyState")])]),t._v(" "),a("p",[a("code",[t._v("readyState")]),t._v("属性表示"),a("code",[t._v("XMLHttpRequest")]),t._v("对象的状态，它有 5 个可能的取值：")]),t._v(" "),a("ul",[a("li",[t._v("0: 代表请求尚未初始化，即"),a("code",[t._v("XMLHttpRequest")]),t._v("对象已创建但尚未调用"),a("code",[t._v("open()")]),t._v("方法；")]),t._v(" "),a("li",[t._v("1: 代表请求已经建立，即 open()方法已经被调用；")]),t._v(" "),a("li",[t._v("2: 代表请求已经发送，即"),a("code",[t._v("send()")]),t._v("方法已经被调用，并且头部和状态已经可获得；")]),t._v(" "),a("li",[t._v("3: 代表请求正在处理中，即服务器正在处理请求并返回响应；")]),t._v(" "),a("li",[t._v("4: 代表请求已完成，即服务器已经返回响应，"),a("code",[t._v("XMLHttpRequest")]),t._v("对象已经接收到完整的响应数据。")])]),t._v(" "),a("h2",{attrs:{id:"ajax跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax跨域"}},[t._v("#")]),t._v(" "),a("code",[t._v("Ajax")]),t._v("跨域")]),t._v(" "),a("p",[a("code",[t._v("Ajax")]),t._v("跨域是指通过"),a("code",[t._v("XMLHttpRequest")]),t._v("对象发送请求到不同域名的服务器。在"),a("code",[t._v("Web")]),t._v("浏览器中，存在"),a("strong",[t._v("同源策略")]),t._v("，即"),a("code",[t._v("JavaScript")]),t._v("脚本可以访问与当前文档源相同的资源，而不能访问其他源的资源。同源策略是"),a("code",[t._v("Web")]),t._v("安全模型的重要组成部分，目的是防止恶意脚本通过跨站点脚本攻击（"),a("code",[t._v("XSS")]),t._v("）等方式窃取用户信息。")]),t._v(" "),a("blockquote",[a("p",[t._v("同源策略（"),a("code",[t._v("Same Origin Policy")]),t._v("）是一种"),a("code",[t._v("Web")]),t._v("浏览器安全机制，用于保护用户数据免受恶意网站的攻击。同源策略规定，"),a("code",[t._v("JavaScript")]),t._v("脚本只能访问与自身文档源（协议、主机名、端口号）相同的资源，不能访问其他源的资源。")])]),t._v(" "),a("p",[t._v("因此，如果通过"),a("code",[t._v("Ajax")]),t._v("请求访问不同源的资源，将会受到同源策略的限制，请求将被阻止。例如，如果一个网页在"),a("code",[t._v("http://www.example.com")]),t._v("域名下，它不能通过"),a("code",[t._v("Ajax")]),t._v("请求访问"),a("code",[t._v("http://api.example.net")]),t._v("域名下的资源。")]),t._v(" "),a("p",[t._v("为了解决"),a("code",[t._v("Ajax")]),t._v("跨域问题，需要使用一些方法来绕过同源策略。常见的方法包括：")]),t._v(" "),a("h3",{attrs:{id:"jsonp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonp"}},[t._v("#")]),t._v(" "),a("code",[t._v("JSONP")])]),t._v(" "),a("p",[a("code",[t._v("JSONP")]),t._v("是一种通过动态创建"),a("code",[t._v("<script>")]),t._v("标签来加载外部脚本的技术，因为"),a("code",[t._v("<script>")]),t._v("标签没有同源策略限制，可以从不同域名加载脚本。"),a("code",[t._v("JSONP")]),t._v("的实现原理是服务器返回一个"),a("code",[t._v("JavaScript")]),t._v("回调函数，客户端通过该回调函数来获取数据。由于"),a("code",[t._v("JSONP")]),t._v("使用了"),a("code",[t._v("<script>")]),t._v("标签，因此只支持"),a("code",[t._v("GET")]),t._v("请求。")]),t._v(" "),a("h4",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),a("p",[t._v("假设我们有一个页面 "),a("code",[t._v("http://www.example.com/index.html")]),t._v("，需要从另一个域名 "),a("code",[t._v("http://api.example.net")]),t._v(" 获取数据，可以使用如下代码：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://api.example.net/data?callback=handleResponse"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在这个例子中，我们定义了一个回调函数 "),a("code",[t._v("handleResponse")]),t._v("，然后动态创建了一个 "),a("code",[t._v("<script>")]),t._v(" 标签，并将其 "),a("code",[t._v("src")]),t._v(" 属性设置为 "),a("code",[t._v("http://api.example.net/data?callback=handleResponse")]),t._v("。"),a("code",[t._v("callback=handleResponse")]),t._v(" 是"),a("code",[t._v("JSONP")]),t._v("的关键，它告诉服务器需要将响应包装在一个回调函数中返回。")]),t._v(" "),a("p",[t._v("服务器端返回的数据应该是一个"),a("code",[t._v("JavaScript")]),t._v("函数调用，例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"John"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("当浏览器接收到这个响应时，就会自动执行 "),a("code",[t._v("handleResponse")]),t._v(" 函数，从而在客户端获得响应数据。由于使用了 "),a("code",[t._v("<script>")]),t._v(" 标签，"),a("strong",[a("code",[t._v("JSONP")]),t._v("只支持"),a("code",[t._v("GET")]),t._v("请求，不能用于发送"),a("code",[t._v("POST")]),t._v("请求")]),t._v("。另外需要注意的是，使用"),a("code",[t._v("JSONP")]),t._v("存在一些安全隐患，因此不建议在生产环境中使用。")]),t._v(" "),a("h4",{attrs:{id:"安全隐患"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安全隐患"}},[t._v("#")]),t._v(" 安全隐患")]),t._v(" "),a("p",[a("code",[t._v("JSONP")]),t._v("存在一些安全隐患，主要有以下几点：")]),t._v(" "),a("ul",[a("li",[t._v("客户端难以控制回调函数名称")])]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("JSONP")]),t._v("中，客户端需要指定一个回调函数的名称，并将该名称作为参数传递给服务器。服务器返回的响应数据将被包装在该函数的调用中返回，从而在客户端中执行该函数并获取响应数据。但是客户端很难控制回调函数的名称，因为这个名称是由服务器返回的。如果恶意网站在响应中返回一个恶意的回调函数名称，可能会导致安全问题。")]),t._v(" "),a("ul",[a("li",[t._v("服务器难以验证客户端身份")])]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("JSONP")]),t._v("中，服务器无法验证客户端的身份，因为请求中包含的回调函数名称是由客户端指定的，服务器并不知道该名称是否来自合法的客户端。因此，如果服务器返回的响应数据包含敏感信息，可能会被恶意网站窃取。")]),t._v(" "),a("ul",[a("li",[t._v("服务器难以控制响应数据")])]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("JSONP")]),t._v("中，服务器无法控制响应数据的格式和内容，因为响应数据将被包装在客户端指定的回调函数的调用中返回。如果恶意网站在请求中传递了恶意代码，可能会导致安全问题。")]),t._v(" "),a("p",[t._v("由于这些安全隐患，不建议在生产环境中使用"),a("code",[t._v("JSONP")]),t._v("，而应该使用更安全的跨域技术，例如"),a("code",[t._v("CORS")]),t._v("。如果必须使用"),a("code",[t._v("JSONP")]),t._v("，建议使用"),a("code",[t._v("HTTPS")]),t._v("协议，并确保响应数据经过严格的验证和过滤，以防止安全漏洞。")]),t._v(" "),a("h3",{attrs:{id:"cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[t._v("#")]),t._v(" "),a("code",[t._v("CORS")])]),t._v(" "),a("p",[a("code",[t._v("CORS")]),t._v("是一种支持跨域资源共享的技术，它允许服务器发送响应头，告诉浏览器允许哪些域名访问资源。通过"),a("code",[t._v("CORS")]),t._v("，可以在客户端使用"),a("code",[t._v("Ajax")]),t._v("请求跨域资源，而无需使用"),a("code",[t._v("JSONP")]),t._v("等绕过同源策略的方法。")]),t._v(" "),a("h4",{attrs:{id:"例子-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子-2"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),a("ul",[a("li",[t._v("在服务器端设置允许跨域请求的头信息")])]),t._v(" "),a("p",[t._v("在服务器端，需要设置允许跨域请求的头信息。具体来说，需要设置 "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" 头信息，该头信息指示服务器允许哪些域名的请求访问。例如，下面的代码允许所有域名的请求访问：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("发送"),a("code",[t._v("CORS")]),t._v("跨域请求")])]),t._v(" "),a("p",[t._v("在客户端，可以使用"),a("code",[t._v("XMLHttpRequest")]),t._v("对象或"),a("code",[t._v("fetch")]),t._v(" "),a("code",[t._v("API")]),t._v("发送"),a("code",[t._v("CORS")]),t._v("请求。发送"),a("code",[t._v("CORS")]),t._v("请求的方式与普通请求相同，只需将 "),a("code",[t._v("XMLHttpRequest")]),t._v(" 对象的 "),a("code",[t._v("withCredentials")]),t._v(" 属性设置为 "),a("code",[t._v("true")]),t._v("，"),a("strong",[t._v("表示允许发送跨域请求的凭证")]),t._v("（如"),a("code",[t._v("cookies")]),t._v("、"),a("code",[t._v("HTTP")]),t._v("认证等）。")]),t._v(" "),a("p",[t._v("例如，以下代码使用 "),a("code",[t._v("fetch")]),t._v(" API 发送 CORS 请求：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.example.com/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cors"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("credentials")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"include"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在上面的代码中，"),a("code",[t._v("fetch")]),t._v(" API 请求的第二个参数中指定了 "),a("code",[t._v("credentials: 'include'")]),t._v("，表示允许发送跨域请求的凭证。")]),t._v(" "),a("h4",{attrs:{id:"凭证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#凭证"}},[t._v("#")]),t._v(" 凭证")]),t._v(" "),a("p",[a("code",[t._v("CORS")]),t._v("（跨域资源共享）是一种机制，允许"),a("code",[t._v("Web")]),t._v("应用程序从不同的域访问其资源。为了提供更安全的访问控制，"),a("code",[t._v("CORS")]),t._v("还支持凭证机制。")]),t._v(" "),a("p",[t._v("凭证是指在"),a("code",[t._v("CORS")]),t._v("请求中携带了"),a("code",[t._v("cookies")]),t._v("、"),a("code",[t._v("HTTP")]),t._v("认证或"),a("code",[t._v("TLS")]),t._v("客户端证书等敏感信息，而不是简单的请求。"),a("code",[t._v("CORS")]),t._v("通过两个头部来控制凭证的发送和接收："),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v(" 和 "),a("code",[t._v("withCredentials")]),t._v("。")]),t._v(" "),a("p",[t._v("当"),a("code",[t._v("Web")]),t._v("应用程序使用"),a("code",[t._v("CORS")]),t._v("请求时，浏览器会在发送请求之前"),a("strong",[t._v("检查目标服务器是否允许跨域请求携带凭证信息")]),t._v("。如果目标服务器允许使用凭证进行跨域请求，那么浏览器会在请求头中设置"),a("code",[t._v("withCredentials")]),t._v("为"),a("code",[t._v("true")]),t._v("，并在发送请求时携带"),a("code",[t._v("cookie")]),t._v("等凭证信息。如果目标服务器不允许使用凭证进行跨域请求，那么浏览器将忽略"),a("code",[t._v("withCredentials")]),t._v("头部，并且不会在请求中携带凭证信息。")]),t._v(" "),a("p",[t._v("目标服务器可以通过设置"),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v("头部来允许或禁止携带凭证信息的跨域请求。如果服务器允许携带凭证信息的跨域请求，它必须设置"),a("code",[t._v("Access-Control-Allow-Origin")]),t._v("头部为请求源的域名，并将"),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v("设置为"),a("code",[t._v("true")]),t._v("。这样，浏览器才会在发送跨域请求时携带凭证信息。")]),t._v(" "),a("blockquote",[a("p",[t._v("浏览器在发送跨域请求时，会自动在请求头中添加"),a("code",[t._v("Origin")]),t._v("字段，该字段表示请求的源地址（域名和协议）。服务器收到请求后，会根据该字段来判断是否允许该跨域请求。")]),t._v(" "),a("p",[t._v("如果服务器允许当前请求的来源（即请求头中的"),a("code",[t._v("Origin")]),t._v("字段）与其自身的域名匹配，那么服务器会在响应头中添加一些"),a("code",[t._v("Access-Control-*")]),t._v("的字段，来告诉浏览器该请求可以被跨域访问，并且可以携带凭证信息。浏览器收到响应后，会检查响应头中的"),a("code",[t._v("Access-Control-*")]),t._v("字段，判断是否允许携带凭证信息。")]),t._v(" "),a("p",[t._v("如果服务器不允许当前请求的来源（即请求头中的"),a("code",[t._v("Origin")]),t._v("字段）与其自身的域名匹配，那么服务器会拒绝该请求，并在响应头中添加一些"),a("code",[t._v("Access-Control-*")]),t._v("的字段，告诉浏览器该请求不能被跨域访问，或者不能携带凭证信息。")])]),t._v(" "),a("h3",{attrs:{id:"代理服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代理服务器"}},[t._v("#")]),t._v(" 代理服务器")]),t._v(" "),a("p",[t._v("代理服务器是指在客户端和服务器之间插入一个中间层，通过代理服务器来转发请求和响应。客户端通过"),a("code",[t._v("Ajax")]),t._v("请求代理服务器上的资源，而代理服务器再向目标服务器发送请求，获取数据后返回给客户端。"),a("strong",[t._v("客户端和代理服务器之间没有跨域问题，因为它们处于同一个域名下。代理服务器和目标服务器之间并不需要进行"),a("code",[t._v("CORS")]),t._v("处理，因为它们不涉及跨域问题(浏览器才有同源策略)。")])]),t._v(" "),a("h4",{attrs:{id:"例子-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子-3"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),a("ul",[a("li",[t._v("启动代理服务器")])]),t._v(" "),a("p",[t._v("在本地启动一个代理服务器，用于转发客户端发送的跨域请求，并从目标服务器获取响应数据。可以使用任何一种"),a("code",[t._v("Web")]),t._v("服务器，例如"),a("code",[t._v("Node.js")]),t._v("中的"),a("code",[t._v("Express")]),t._v("。")]),t._v(" "),a("ul",[a("li",[t._v("配置代理服务器")])]),t._v(" "),a("p",[t._v("配置代理服务器以将客户端请求转发到目标服务器，并将响应数据返回给客户端。例如，以下是一个基本的"),a("code",[t._v("Express")]),t._v("代理服务器配置：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"express"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" httpProxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http-proxy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" httpProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createProxyServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("web")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://api.example.com"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Proxy server listening on port 3000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在上面的代码中，"),a("code",[t._v("http-proxy")]),t._v("模块用于创建代理服务器。"),a("code",[t._v("app.use()")]),t._v("函数用于配置路由，将所有客户端请求转发到目标服务器（"),a("code",[t._v("http://api.example.com")]),t._v("）。")]),t._v(" "),a("ul",[a("li",[t._v("发送跨域请求")])]),t._v(" "),a("p",[t._v("在客户端，向代理服务器发送跨域请求。例如，以下是一个使用"),a("code",[t._v("fetch")]),t._v("对象发送跨域请求的示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:3000/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在上面的代码中，客户端向代理服务器发送"),a("code",[t._v("GET")]),t._v("请求，并从代理服务器获取响应数据。")])])}),[],!1,null,null,null);s.default=e.exports}}]);